{"version":3,"sources":["node_modules/browser-pack/_prelude.js","node_modules/cssify/browser.js","src/class-store.js","src/index.js","src/tm-store.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AClCA,CAAC,CAAA,YAAY;;AAEX,MAAI,OAAO,GAAG,OAAO,CAAC,SAAS,CAAC,CAAC;AACjC,MAAI,OAAO,GAAG,OAAO,CAAC,MAAM,CAAC;AAC7B,MAAI,QAAQ,GAAG,OAAO,CAAC,OAAO,CAAC;;AAG/B,WAAS,UAAU,CAAC,GAAG,EAAE;AACvB,WAAO,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,GAAG,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;GACnD;;MAEK,KAAK;AAEE,aAFP,KAAK,CAEG,OAAO,EAAE,EAAE,EAAE,KAAK,EAAE,YAAY,EAAE;4BAF1C,KAAK;;AAIP,UAAI,CAAC,OAAO,GAAG,OAAO,CAAC;AACvB,UAAI,CAAC,SAAS,GAAG,EAAE,CAAC;AACpB,UAAI,CAAC,OAAO,GAAG,EAAE,CAAC;AAClB,UAAI,CAAC,EAAE,GAAG,EAAE,CAAC;AACb,UAAI,CAAC,KAAK,GAAG,KAAK,CAAC;AACnB,UAAI,CAAC,MAAM,GAAG,EAAE,CAAC;;AAEjB,kBAAY,GAAG,OAAO,CAAC,IAAI,CAAC,YAAY,EAAE,EAAE,YAAY,CAAC,CAAC;;AAE1D,UAAI,CAAC,KAAK,GAAG,YAAY,CAAC;;AAE1B,WAAK,IAAI,IAAI,IAAI,OAAO,EAAE;AACxB,YAAI,MAAM,GAAG,IAAI,GAAG,UAAU,CAAC,IAAI,CAAC,CAAC;AACrC,YAAI,OAAO,IAAI,CAAC,MAAM,CAAC,AAAC,KAAK,UAAU,EAAE;AACvC,iBAAO,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,IAAI,CAAC,CAAC;SACvC;OACF;KACF;;iBArBG,KAAK;;aAuBG,wBAAG;AACb,eAAO;AACL,uBAAa,EAAE,EAAE;SAClB,CAAC;OACH;;;aAEM,mBAAG;AACR,YAAI,CAAC,WAAW,EAAE,CAAC;OACpB;;;aAEO,kBAAC,MAAM,EAAE;AACf,YAAI,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC;AAC3B,YAAI,OAAO,CAAC,MAAM,CAAC,EAAE;AACnB,iBAAO,CAAC,MAAM,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,EAAE,KAAK,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC,CAAC;SAChF;OACF;;;aAEO,kBAAC,QAAQ,EAAE,OAAO,EAAE,aAAa,EAAE;AACzC,YAAI,CAAC,SAAS,CAAC,IAAI,CAAC,EAAC,QAAQ,EAAE,QAAQ,EAAE,OAAO,EAAE,OAAO,EAAC,CAAC,CAAC;AAC5D,YAAI,CAAC,aAAa,EAAE;AAClB,iBAAO,CAAC,OAAO,CAAC,EAAE,EAAE,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;SAC5C;OACF;;;aAEQ,mBAAC,MAAM,EAAE;AAChB,YAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;OAC3B;;;aAEM,mBAAG;;;;;;;;OAQT;;;aAEM,iBAAC,KAAK,EAAE,KAAK,EAAE;AACpB,eAAO,CAAC,GAAG,CAAC,6BAA6B,EAAE,oBAAoB,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC;AACvF,YAAI,CAAC,KAAK,IAAI,IAAI,CAAC,eAAe,EAAE;AAClC,iBAAO;SACR;AACD,aAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AAC9C,cAAI,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;AACjC,kBAAQ,CAAC,OAAO,CAAC,QAAQ,CAAC,QAAQ,CAAC,OAAO,CAAC,EAAE,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;SACzD;AACD,YAAI,CAAC,OAAO,EAAE,CAAC;AACf,eAAO,CAAC,GAAG,CAAC,mDAAmD,EAAE,gCAAgC,EAC7F,KAAK,EAAE,wCAAwC,CAAC,CAAC;OACtD;;;aAEQ,mBAAC,OAAO,EAAE;AACjB,YAAI,CAAC,eAAe,GAAG,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,eAAe,GAAG,CAAC,GAAG,CAAC,CAAC;AAC3E,eAAO,CAAC,GAAG,CAAC,kBAAkB,EAAE,oBAAoB,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC;;AAE5E,YAAI,OAAO,OAAO,CAAC,IAAI,KAAK,UAAU,EAAE;AACtC,iBAAO,OAAO,CAAC;SAChB;AACD,eAAO,IAAI,CAAC,EAAE,CAAC,UAAC,OAAO,EAAE,MAAM,EAAK;AAClC,iBAAO,CAAC,OAAO,CAAC,CAAC;SAClB,CAAC,CAAA;OACH;;;aAEM,iBAAC,KAAK,EAAE;AACb,YAAI,CAAC,eAAe,EAAE,CAAC;AACvB,eAAO,CAAC,GAAG,CAAC,gBAAgB,EAAE,oBAAoB,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC;AAC1E,YAAI,IAAI,CAAC,eAAe,IAAI,CAAC,EAAE;AAC7B,cAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;SACrB;OACF;;;;;;;aAMS,oBAAC,KAAK,EAAE,QAAQ,EAAE;AAC1B,YAAI,QAAQ,EAAE;AACZ,cAAI,CAAC,KAAK,GAAG,OAAO,CAAC,IAAI,CAAC,YAAY,EAAE,EAAE,KAAK,CAAC,CAAC;SAClD;AACD,YAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;OACrB;;;aAEgB,2BAAC,OAAO,EAAE;AACzB,YAAI,CAAC,QAAQ,GAAG,OAAO,CAAA;OACxB;;;aAEgB,6BAAG;AAClB,eAAO,IAAI,CAAC,QAAQ,CAAC;OACtB;;;;;;;aAKY,uBAAC,IAAI,EAAE,KAAK,EAAE;AACzB,YAAI,KAAK,GAAG,KAAK,CAAC;AAClB,gBAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa,EAAE,UAAC,IAAI,EAAK;AAC3C,cAAI,IAAI,CAAC,IAAI,KAAK,IAAI,EAAE;AACtB,gBAAI,CAAC,KAAK,GAAG,KAAK,CAAC;AACnB,iBAAK,GAAG,IAAI,CAAC;WACd;SACF,CAAC,CAAC;;AAEH,YAAI,CAAC,KAAK,EAAE;AACV,cAAI,CAAC,KAAK,CAAC,aAAa,CAAC,IAAI,CAAC,EAAC,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAC,CAAC,CAAC;SAC3D;;AAED,YAAI,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;OAChC;;;aAEQ,mBAAC,KAAK,EAAE,GAAG,EAAE,MAAM,EAA+B;;;YAA7B,MAAM,yDAAG,OAAO;YAAE,IAAI,yDAAG,EAAE;;AACvD,YAAI,CAAC,aAAa,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;AAChC,YAAI,KAAK,GAAG,IAAI,CAAC,EAAE,CAAC,KAAK,EAAE,CAAC;;AAE5B,YAAI,aAAa,GAAG;AAClB,gBAAM,EAAE,MAAM;AACd,aAAG,EAAE,GAAG;SACT,CAAC;;AAEF,YAAI,MAAM,KAAK,OAAO,IAAI,MAAM,KAAK,KAAK,EAAE;AAC1C,uBAAa,CAAC,MAAM,GAAG,MAAM,CAAC;SAC/B;AACD,gBAAQ,MAAM;AACZ,eAAK,OAAO;AACV,gBAAI,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,EAAE;AAC1B,iBAAG,GAAG,GAAG,GAAG,eAAe,CAAC;aAC7B,MACI;AACH,iBAAG,GAAG,GAAG,GAAG,gBAAgB,CAAC;aAC9B;AACD,yBAAa,CAAC,MAAM,GAAG,MAAM,CAAC;AAC9B,kBAAM;AAAA,AACR,eAAK,KAAK;AACR,yBAAa,CAAC,MAAM,GAAG,MAAM,CAAC;AAC9B,kBAAM;AAAA,AACR;AACE,yBAAa,CAAC,IAAI,GAAG,MAAM,CAAC;AAAA,SAC/B;;AAED,YAAI,CAAC,KAAK,CAAC,OAAO,CAAC,aAAa,EAAE,IAAI,CAAC,CAAC,CACnC,IAAI,CAAC,UAAC,QAAQ,EAAK;AAClB,gBAAK,aAAa,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;AACjC,eAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;SACzB,EAAE,UAAC,KAAK,EAAK;AACZ,eAAK,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;SACrB,CACJ,CAAC;;AAEF,eAAO,KAAK,CAAC,OAAO,CAAC;OACtB;;;aAEW,sBAAC,GAAG,EAAE;;;;AAEhB,YAAK,GAAG,EAAG;AACT,aAAG,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;SAC3B;AACD,YAAI,OAAO,CAAC;AACZ,YAAI,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE;AACpB,iBAAO,GAAG,YAAM;AACd,gBAAI,KAAK,GAAG,OAAK,EAAE,CAAC,KAAK,EAAE,CAAC;AAC5B,iBAAK,CAAC,OAAO,CAAC,OAAK,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC;AAChC,mBAAO,KAAK,CAAC,OAAO,CAAC;WACtB,CAAA;SACF,MACI;AACH,iBAAO,GAAG,YAAM;AACd,gBAAI,EAAE,GAAG,WAAU,CAAC,CAAC,CAAC;AACtB,mBAAO,EAAE,CAAC,KAAK,CAAC,IAAI,EAAE,KAAK,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,aAAY,CAAC,CAAC,CAAC,CAAC;WACjE,CAAA;SACF;AACD,eAAO,EAAC,EAAE,EAAE,OAAO,EAAC,CAAC;OACtB;;;aAEU,uBAAG,EACb;;;WArMG,KAAK;;;AAyMX,QAAM,CAAC,OAAO,GAAG,KAAK,CAAC;CAExB,CAAA,CAAC,IAAI,WAAM,CAAC;;;;;;;;;;;;ACrNb,IAAI,OAAO,GAAG,OAAO,CAAC,SAAS,CAAC,CAAC;AACjC,IAAI,MAAM,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;;AAE/B,MAAM,CAAC,KAAK,CAAC,iEAAiE,CAAC,CAAA;;AAE/E,IAAI,GAAG,GAAG,OAAO,CAAC,MAAM,CAAC,eAAe,EAAE,EAAE,CAAC,CAAC;;AAE9C,GAAG,CAAC,SAAS,CAAC,cAAc,EAAE,YAAY,EAEzC,CAAC,CAAC;AACH,GAAG,CAAC,OAAO,CAAC,SAAS,EAAE,CAAC,IAAI,EAAE,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;AACtD,GAAG,CAAC,GAAG,CAAC,CAAC,YAAY,EAEpB,CAAC,CAAC,CAAC;;;;;;;;;;;ACbJ,MAAM,CAAC,OAAO,GAAG,UAAS,EAAE,EAAC;;AAE3B,MAAI,KAAK,GAAG,EAAE,CAAC;AACf,MAAI,UAAU,GAAG,OAAO,CAAC,eAAe,CAAC,CAAC;AAC1C,MAAI,QAAQ,GAAG,IAAI,CAAC;;AAEpB,OAAK,CAAC,MAAM,GAAG,UAAS,OAAO,EAAE,SAAS,EAAC,EAE1C,CAAC;;AAGF,SAAO,KAAK,CAAC;CACd,CAAC","file":"build.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","module.exports = function (css, customDocument) {\n  var doc = customDocument || document;\n  if (doc.createStyleSheet) {\n    var sheet = doc.createStyleSheet()\n    sheet.cssText = css;\n    return sheet.ownerNode;\n  } else {\n    var head = doc.getElementsByTagName('head')[0],\n        style = doc.createElement('style');\n\n    style.type = 'text/css';\n\n    if (style.styleSheet) {\n      style.styleSheet.cssText = css;\n    } else {\n      style.appendChild(doc.createTextNode(css));\n    }\n\n    head.appendChild(style);\n    return style;\n  }\n};\n\nmodule.exports.byUrl = function(url) {\n  if (document.createStyleSheet) {\n    return document.createStyleSheet(url).ownerNode;\n  } else {\n    var head = document.getElementsByTagName('head')[0],\n        link = document.createElement('link');\n\n    link.rel = 'stylesheet';\n    link.href = url;\n\n    head.appendChild(link);\n    return link;\n  }\n};\n","/**\n * Created by Phuc on 9/10/2015.\n */\n!function () {\n\n  var angular = require('angular');\n  var _extend = angular.extend;\n  var _forEach = angular.forEach;\n\n\n  function capitalize(str) {\n    return str.charAt(0).toUpperCase() + str.slice(1);\n  }\n\n  class Store {\n\n    constructor(Actions, $q, $ajax, initialState) {\n\n      this.Actions = Actions;\n      this.selectors = [];\n      this.$scopes = [];\n      this.$q = $q;\n      this.$ajax = $ajax;\n      this.cached = {};\n\n      initialState = _extend(this.initialState(), initialState);\n\n      this.state = initialState;\n\n      for (var name in Actions) {\n        var fnName = 'on' + capitalize(name);\n        if (typeof(this[fnName]) === 'function') {\n          Actions[name].add(this[fnName], this);\n        }\n      }\n    }\n\n    initialState() {\n      return {\n        loading_state: []\n      };\n    }\n\n    execute() {\n      this.__initSetup();\n    }\n\n    dispatch(action) {\n      var Actions = this.Actions;\n      if (Actions[action]) {\n        Actions[action].dispatch.apply(this, Array.prototype.slice.call(arguments, 1));\n      }\n    }\n\n    register(selector, handler, skipFirstTime) {\n      this.selectors.push({selector: selector, handler: handler});\n      if (!skipFirstTime) {\n        handler(_extend({}, selector(this.state)));\n      }\n    }\n\n    bindScope($scope) {\n      this.$scopes.push($scope);\n    }\n\n    $digest() {\n      //for (var i = 0; i < this.$scopes.length; i++) {\n      //  var $scope = this.$scopes[i];\n      //  if (!$scope.$$phase) {\n      //    //$digest or $apply\n      //    $scope.$digest();\n      //  }\n      //}\n    }\n\n    trigger(state, force) {\n      console.log('%c >> trigger delay in flow', 'background: yellow', this.__trigger_depth);\n      if (!force && this.__trigger_depth) {\n        return;\n      }\n      for (var i = 0; i < this.selectors.length; i++) {\n        var selector = this.selectors[i];\n        selector.handler(selector.selector(_extend({}, state)));\n      }\n      this.$digest();\n      console.log('%c ============ <<<< CURRENT STATE >>> ========= ', 'background: blue; color: white',\n          state, '======================================');\n    }\n\n    flowStart(promise) {\n      this.__trigger_depth = this.__trigger_depth ? this.__trigger_depth + 1 : 1;\n      console.log('%c >> flow start', 'background: yellow', this.__trigger_depth);\n\n      if (typeof promise.then === 'function') {\n        return promise;\n      }\n      return this.$q((resolve, reject) => {\n        resolve(promise);\n      })\n    }\n\n    flowEnd(state) {\n      this.__trigger_depth--;\n      console.log('%c >> flow end', 'background: yellow', this.__trigger_depth);\n      if (this.__trigger_depth == 0) {\n        this.trigger(state);\n      }\n    }\n\n\n    /***\n     * common store functions\n     */\n    applyState(state, override) {\n      if (override) {\n        this.state = _extend(this.initialState(), state);\n      }\n      this.trigger(state);\n    }\n\n    setPersistStorage(storage) {\n      this.pStorage = storage\n    }\n\n    getPersistStorage() {\n      return this.pStorage;\n    }\n\n    /******************\n     * private function & async query\n     ******************/\n    __markLoading(name, state) {\n      var found = false;\n      _forEach(this.state.loading_state, (item) => {\n        if (item.name === name) {\n          item.state = state;\n          found = true;\n        }\n      });\n\n      if (!found) {\n        this.state.loading_state.push({name: name, state: state});\n      }\n\n      this.trigger(this.state, true);\n    }\n\n    __request(label, url, params, method = 'JSONP', opts = {}) {\n      this.__markLoading(label, true);\n      var defer = this.$q.defer();\n\n      var requestParams = {\n        method: method,\n        url: url\n      };\n\n      if (method === 'JSONP' || method === 'GET') {\n        requestParams.params = params;\n      }\n      switch (method) {\n        case 'JSONP':\n          if (url.indexOf('?') >= -1) {\n            url = url + 'JSON_CALLBACK';\n          }\n          else {\n            url = url + '?JSON_CALLBACK';\n          }\n          requestParams.params = params;\n          break;\n        case 'GET':\n          requestParams.params = params;\n          break;\n        default:\n          requestParams.data = params;\n      }\n\n      this.$ajax(_extend(requestParams, opts))\n          .then((response) => {\n            this.__markLoading(label, false);\n            defer.resolve(response);\n          }, (error) => {\n            defer.reject(error);\n          }\n      );\n\n      return defer.promise;\n    }\n\n    __fromCached(key) {\n\n      if ((key)) {\n        key = JSON.stringify(key);\n      }\n      var chainOr;\n      if (this.cached[key]) {\n        chainOr = () => {\n          var defer = this.$q.defer();\n          defer.resolve(this.cached[key]);\n          return defer.promise;\n        }\n      }\n      else {\n        chainOr = () => {\n          var fn = arguments[0];\n          return fn.apply(self, Array.prototype.slice.call(arguments, 1));\n        }\n      }\n      return {or: chainOr};\n    }\n\n    __initSetup() {\n    }\n\n  }\n\n  module.exports = Store;\n\n}.call(this);\n","/**\n * Created by Phuc on 9/9/2015.\n */\n\nvar angular = require('angular');\nvar cssify = require('cssify');\n\ncssify.byUrl('//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css')\n\nvar app = angular.module('ngTimeMachine', []);\n\napp.directive('timeControls', function () {\n\n});\napp.factory('tmStore', ['$q', require('./tm-store')]);\napp.run([function () {\n\n}]);\n\n","/**\n * Created by Phuc on 9/10/2015.\n */\n\nmodule.exports = function($q){\n\n  var Store = {};\n  var ClassStore = require('./class-store');\n  var instance = null;\n\n  Store.Define = function(actions, storeDefs){\n\n  };\n\n\n  return Store;\n};\n"]}